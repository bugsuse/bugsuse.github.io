<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>matplotlib中quiver参数细解 | bugsuse</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noodp" />
<meta name="Description" content="About LoveIt Theme"><link rel="prev" href="https://atmosai.github.io/content/posts/matplotlib_fix_colorbar/" /><link rel="next" href="https://atmosai.github.io/content/posts/how_to_download_video_using_youtube-dl/" /><link rel="canonical" href="https://atmosai.github.io/content/posts/matplotlib_quiver/" />
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
<link rel="manifest" href="/img/site.webmanifest">
<link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff"><meta property="og:title" content="matplotlib中quiver参数细解" />
<meta property="og:description" content="matplotlib中的矢量场函数相对来说没有NCL中的矢量场函数好用。有时候还需要对参数进行一定的调整。 matplotlib官网对quiv" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://atmosai.github.io/content/posts/matplotlib_quiver/" />
<meta property="article:published_time" content="2020-02-29T10:32:23+08:00" />
<meta property="article:modified_time" content="2020-02-29T10:32:23+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="matplotlib中quiver参数细解"/>
<meta name="twitter:description" content="matplotlib中的矢量场函数相对来说没有NCL中的矢量场函数好用。有时候还需要对参数进行一定的调整。 matplotlib官网对quiv"/>
<script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "matplotlib中quiver参数细解",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/atmosai.github.io\/content\/posts\/matplotlib_quiver\/"
        },"image": {
                "@type": "ImageObject",
                "url": "https:\/\/atmosai.github.io\/cover.png",
                "width":  800 ,
                "height":  600 
            },"genre": "content","keywords": "matplotlib, python","wordcount":  855 ,
        "url": "https:\/\/atmosai.github.io\/content\/posts\/matplotlib_quiver\/","datePublished": "2020-02-29T10:32:23\x2b08:00","dateModified": "2020-02-29T10:32:23\x2b08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
                "@type": "Organization",
                "name": "bugsuse",
                "logo": {
                "@type": "ImageObject",
                "url": "https:\/\/atmosai.github.io\/img\/res.png",
                "width":  127 ,
                "height":  40 
                }
            },"description": ""
    }
    </script><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/css/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/css/lib/animate/animate.min.css"></head>
    <body><script>
            window.isDark = (window.localStorage && window.localStorage.getItem('theme')) === 'dark';
            window.isDark && document.body.classList.add('dark-theme');
        </script><div class="wrapper"><nav class="navbar">
    <div class="navbar-container">
        <div class="navbar-header animated bounceIn">
            <a href="https://atmosai.github.io">bugsuse</a>
        </div>
        <div class="navbar-menu"><a class="menu-item" href="https://atmosai.github.io/posts" title="">Posts</a><a class="menu-item" href="https://atmosai.github.io/atmos" title="">Atmos</a><a class="menu-item" href="https://atmosai.github.io/model" title="">Model</a><a class="menu-item" href="https://atmosai.github.io/tools" title="">Tools</a><a class="menu-item" href="https://atmosai.github.io/tags" title="">Tags</a><a class="menu-item" href="https://atmosai.github.io/categories" title="">Categories</a><a class="menu-item" href="https://atmosai.github.io/friends" title="">Friends</a><a class="menu-item" href="https://atmosai.github.io/about" title="">About</a><a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a>
        </div>
    </div>
</nav><nav class="navbar-mobile">
    <div class="navbar-container">
        <div class="navbar-header">
            <div class="navbar-header-title animated bounceIn">
                <a href="https://atmosai.github.io">bugsuse</a>
            </div>
            <div class="menu-toggle" id="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="navbar-menu" id="mobile-menu"><a class="menu-item" href="https://atmosai.github.io/posts" title="">Posts</a><a class="menu-item" href="https://atmosai.github.io/atmos" title="">Atmos</a><a class="menu-item" href="https://atmosai.github.io/model" title="">Model</a><a class="menu-item" href="https://atmosai.github.io/tools" title="">Tools</a><a class="menu-item" href="https://atmosai.github.io/tags" title="">Tags</a><a class="menu-item" href="https://atmosai.github.io/categories" title="">Categories</a><a class="menu-item" href="https://atmosai.github.io/friends" title="">Friends</a><a class="menu-item" href="https://atmosai.github.io/about" title="">About</a><a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a>
        </div>
    </div>
</nav>
<main class="main">
                <div class="container"><div class="page single"><h1 class="post-title animated pulse faster">matplotlib中quiver参数细解</h1><div class="post-content"><p><code>matplotlib</code>中的矢量场函数相对来说没有<code>NCL</code>中的矢量场函数好用。有时候还需要对参数进行一定的调整。</p>
<p><code>matplotlib</code>官网对<code>quiver</code>函数的部分解释：</p>
<br>
<blockquote>
<p><strong>Arrow size</strong></p>
<p>The default settings auto-scales the length of the arrows to a reasonable size. To change this behavior see the <em>scale</em> and <em>scale_units</em> parameters.</p>
<p><strong>Arrow shape</strong></p>
<p>The defaults give a slightly swept-back arrow; to make the head a triangle, make <em>headaxislength</em> the same as <em>headlength</em>. To make the arrow more pointed, reduce <em>headwidth</em> or increase <em>headlength</em> and <em>headaxislength</em>. To make the head smaller relative to the shaft, scale down all the head parameters. You will probably do best to leave minshaft alone.</p>
<p><strong>Arrow outline</strong></p>
<p><em>linewidths</em> and <em>edgecolors</em> can be used to customize the arrow outlines.</p>
</blockquote>
<p>以下是对不同参数的代码示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span><span class="p">)</span>

<span class="c1"># 默认选项</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># 修改 scale 放缩矢量符号，scale 值越大，矢量越小，相反越大</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="c1"># 修改 width, 默认为图形宽度的 0.005 倍，一般不需要改动</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>

<span class="c1"># headwidth 矢量符号箭头的宽度</span>
<span class="n">q4</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">headwidth</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># headlength 矢量符号箭头的长度，从尖部到尾部</span>
<span class="n">q5</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">headwidth</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">headlength</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># headaxislength 矢量符号箭头的尖部到矢量符号轴和箭头的交接处的长度</span>
<span class="n">q6</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">headwidth</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">headlength</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">headaxislength</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># 保持 headwidth 和 headlength相同，headaxislength 稍小于 headlength，如果 headaxislength = headlength，矢量箭头将为三角形 </span>
<span class="n">q7</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">headwidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headlength</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headaxislength</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># headlength 小于 headaxislength，矢量箭头变成了四边形</span>
<span class="n">q8</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">headwidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headlength</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">headaxislength</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># minlength 表示矢量长度的阈值，当矢量长度小于此值时，矢量将替换为正六边形</span>
<span class="n">q9</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">0.82</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">headwidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headlength</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headaxislength</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">minlength</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># 矢量的长度与scale密切相关，更改 scale 可以调整矢量的长度</span>
<span class="n">q10</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">headwidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headlength</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headaxislength</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">minlength</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># minshaft 表示对长度较小的矢量进行放缩，如果长度很小时，此值小于1，那么小箭头将看起来很奇怪</span>
<span class="c1"># 一般不需要修改此值</span>
<span class="n">q11</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">headwidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headlength</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headaxislength</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">minshaft</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">q12</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">1.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">headwidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headlength</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headaxislength</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">minshaft</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># 一般情况下默认 scale 即可，可根据需要调整 width, 矢量箭头的相关参数即可</span>
<span class="c1"># facecolor 表示箭头表面颜色，linewidth 和 edgecolro 控制矢量轮廓属性</span>
<span class="n">q0</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.007</span><span class="p">,</span> 
               <span class="n">headwidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">headlength</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">headaxislength</span><span class="o">=</span><span class="mf">3.5</span>
               <span class="n">facecolor</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">red</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">k</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># 添加quiver刻度标签</span>
<span class="c1"># 一般情况下建议不要改动 coordinates 参数值，除非需要固定位置，固定位置时不建议使用 data 坐标，</span>
<span class="c1"># 可使用 axes 或 figure 坐标</span>
<span class="n">qk</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">quiverkey</span><span class="p">(</span><span class="n">q0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">$2 m/s$</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">coordinates</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">data</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">]</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">(</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><img src="/img/2020/02/29/quiver.png" style="zoom:80%;" /></p>
<center><font size=2 color='grey'>不同参数下的quiver形状</font></center>
<a class="post-dummy-target" id="参考链接"></a><h3>参考链接</h3>
<ol>
<li><a href="https://matplotlib.org/3.1.3/api/_as_gen/matplotlib.pyplot.quiver.html">https://matplotlib.org/3.1.3/api/_as_gen/matplotlib.pyplot.quiver.html</a></li>
<li><a href="https://stackoverflow.com/questions/36534381/understanding-matplotlibs-quiver-plotting">https://stackoverflow.com/questions/36534381/understanding-matplotlibs-quiver-plotting</a></li>
</ol>
</div>
    </div></div>
            </main><footer class="footer">
    <div class="copyright"><div class="copyright-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="external nofollow noopener noreffer">LoveIt<i class="far fa-heart fa-fw"></i></a>
        </div>

        <div class="copyright-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2016 - 2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://atmosai.github.io" target="_blank">bugsuse</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
    </div>
</footer></div><a href="#" class="dynamic-to-top" id="dynamic-to-top" data-scroll>
            <span>&nbsp;</span>
        </a><script src="/js/lib/jquery/jquery.slim.min.js"></script><script src="/js/lib/lazysizes/lazysizes.min.js"></script><script src="/js/lib/smooth-scroll/smooth-scroll.polyfills.min.js"></script><script>window.scroll = new SmoothScroll('[data-scroll]', {speed: 300, speedAsDuration: true});</script><link rel="stylesheet" href="/css/lib/katex/katex.min.css"><script src="/js/lib/katex/katex.min.js"></script><script defer src="/js/lib/katex/auto-render.min.js"></script><link rel="stylesheet" href="/css/lib/katex/copy-tex.min.css"><script defer src="/js/lib/katex/copy-tex.min.js"></script><script defer src="/js/lib/katex/mhchem.min.js"></script><script>
        document.addEventListener("DOMContentLoaded", function () {
            renderMathInElement(document.body, {
                delimiters: [
                    { left: "$$", right: "$$", display: true },
                    { left: "\\(", right: "\\)", display: false },
                    { left: "\\[", right: "\\]", display: true },{ left: "$", right: "$", display: false },]
            });
        });
    </script><script src="/js/blog.min.js"></script></body>
</html>